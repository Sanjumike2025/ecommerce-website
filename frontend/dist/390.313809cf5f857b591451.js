/*! For license information please see 390.313809cf5f857b591451.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[390],{2403:(e,t,r)=>{r.d(t,{A:()=>i,X:()=>a});var n=r(8413),o=r(1609);function a(e){return(0,o.Ay)("MuiAlert",e)}const i=(0,n.A)("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"])},4390:(e,t,r)=>{r.r(t),r.d(t,{default:()=>j});var n=r(6540),o=r(7834),a=r(3551),i=r(4659),l=r(4339),s=r(4992),c=r(1043),u=r(1629),p=r(1083),d=r(9591),m=r(1987);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach(function(t){y(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function y(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var s=n&&n.prototype instanceof l?n:l,c=Object.create(s.prototype);return b(c,"_invoke",function(r,n,o){var a,l,s,c=0,u=o||[],p=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,r){return a=t,l=0,s=e,d.n=r,i}};function m(r,n){for(l=r,s=n,t=0;!p&&c&&!o&&t<u.length;t++){var o,a=u[t],m=d.p,f=a[2];r>3?(o=f===n)&&(s=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=m&&((o=r<2&&m<a[1])?(l=0,d.v=n,d.n=a[1]):m<f&&(o=r<3||a[0]>n||n>f)&&(a[4]=r,a[5]=n,d.n=f,l=0))}if(o||r>1)return i;throw p=!0,n}return function(o,u,f){if(c>1)throw TypeError("Generator is already running");for(p&&1===u&&m(u,f),l=u,s=f;(t=l<2?e:s)||!p;){a||(l?l<3?(l>1&&(d.n=-1),m(l,s)):d.n=s:d.v=s);try{if(c=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(p=d.n<0)?s:r.call(n,d))!==i)break}catch(t){a=e,l=1,s=t}finally{c=1}}return{value:t,done:p}}}(r,o,a),!0),c}var i={};function l(){}function s(){}function c(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(b(t={},n,function(){return this}),t),p=c.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,b(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=c,b(p,"constructor",c),b(c,"constructor",s),s.displayName="GeneratorFunction",b(c,o,"GeneratorFunction"),b(p),b(p,o,"Generator"),b(p,n,function(){return this}),b(p,"toString",function(){return"[object Generator]"}),(A=function(){return{w:a,m:d}})()}function b(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}b=function(e,t,r,n){function a(t,r){b(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},b(e,t,r,n)}function g(e,t,r,n,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,o)}function x(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){g(a,n,o,i,l,"next",e)}function l(e){g(a,n,o,i,l,"throw",e)}i(void 0)})}}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],s=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const j=function(){var e=(0,d.A)(),t=e.user,r=e.token,f=e.login,v=S((0,n.useState)(null),2),b=v[0],g=v[1],w=S((0,n.useState)(!0),2),j=w[0],O=w[1],P=S((0,n.useState)(null),2),E=P[0],C=P[1],M=S((0,n.useState)(null),2),k=M[0],_=M[1],$=S((0,n.useState)(""),2),N=$[0],z=$[1],W=S((0,n.useState)(""),2),T=W[0],F=W[1],I=S((0,n.useState)(""),2),L=I[0],R=I[1],B=S((0,n.useState)(""),2),D=B[0],G=B[1];(0,n.useEffect)(function(){var e=function(){var e=x(A().m(function e(){var n,o;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t&&r){e.n=1;break}return e.a(2);case 1:return e.p=1,O(!0),e.n=2,p.A.get("http://localhost:5000/api/users/".concat(t.id),{headers:{Authorization:"Bearer ".concat(r)}});case 2:n=e.v,g(n.data),F(n.data.province||""),R(n.data.district||""),G(n.data.municipal||""),e.n=4;break;case 3:e.p=3,o=e.v,console.error("Error fetching profile:",o),C("Failed to load profile.");case 4:return e.p=4,O(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}();e()},[t,r]);var H=function(e){var t=e.target,r=t.name,n=t.value;g(h(h({},b),{},y({},r,n)))},q=function(){var e=x(A().m(function e(n){var o,a,i,l,s;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n.preventDefault(),C(null),_(null),b){e.n=1;break}return e.a(2);case 1:return e.p=1,o=h(h({},b),{},{province:T,district:L,municipal:D}),N&&(o.password=N),e.n=2,p.A.put("http://localhost:5000/api/users/".concat(t.id),o,{headers:{Authorization:"Bearer ".concat(r)}});case 2:a=e.v,g(a.data),z(""),_("Profile updated successfully!"),a.data.first_name===t.first_name&&a.data.last_name===t.last_name&&a.data.email===t.email||f(a.data.email,N||"current_password_placeholder"),e.n=4;break;case 3:e.p=3,s=e.v,console.error("Error updating profile:",(null===(i=s.response)||void 0===i?void 0:i.data)||s.message),C((null===(l=s.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.message)||"Failed to update profile.");case 4:return e.a(2)}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}();return j?n.createElement(o.A,{maxWidth:"md",sx:{mt:4,mb:4}},n.createElement(a.A,{variant:"h6",align:"center"},"Loading profile...")):E&&!b?n.createElement(o.A,{maxWidth:"md",sx:{mt:4,mb:4}},n.createElement(i.A,{severity:"error"},E)):b?n.createElement(o.A,{maxWidth:"md",sx:{mt:4,mb:4}},n.createElement(a.A,{variant:"h4",component:"h1",gutterBottom:!0},"User Profile"),n.createElement(l.A,{elevation:3,sx:{p:4}},n.createElement(s.A,{component:"form",onSubmit:q,sx:{mt:1}},k&&n.createElement(i.A,{severity:"success",sx:{mb:2}},k),E&&n.createElement(i.A,{severity:"error",sx:{mb:2}},E),n.createElement(c.A,{margin:"normal",required:!0,fullWidth:!0,id:"first_name",label:"First Name",name:"first_name",value:b.first_name||"",onChange:H}),n.createElement(c.A,{margin:"normal",required:!0,fullWidth:!0,id:"last_name",label:"Last Name",name:"last_name",value:b.last_name||"",onChange:H}),n.createElement(c.A,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",value:b.email||"",onChange:H}),n.createElement(c.A,{margin:"normal",fullWidth:!0,id:"mobile_number",label:"Mobile Number",name:"mobile_number",value:b.mobile_number||"",onChange:H,inputProps:{pattern:"^980[0-9]{7}$"},helperText:"Enter 10-digit Nepali mobile number (e.g., 980xxxxxxx)"}),n.createElement(m.A,{onAddressChange:function(e){var t=e.province,r=e.district,n=e.municipal;F(t),R(r),G(n)},initialProvince:T,initialDistrict:L,initialMunicipal:D}),n.createElement(c.A,{margin:"normal",fullWidth:!0,name:"password",label:"New Password (leave blank to keep current)",type:"password",id:"new-password",value:N,onChange:function(e){z(e.target.value)}}),n.createElement(u.A,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2}},"Update Profile")))):n.createElement(o.A,{maxWidth:"md",sx:{mt:4,mb:4}},n.createElement(a.A,{variant:"h6",align:"center"},"No profile data found."))}},4659:(e,t,r)=>{r.d(t,{A:()=>M});var n=r(8587),o=r(8168),a=r(6540),i=r(4164),l=r(5659),s=r(771),c=r(1848),u=r(5669),p=r(6025),d=r(8466),m=r(4339),f=r(2403),v=r(9455),h=r(561),y=r(4848);const A=(0,h.A)((0,y.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),b=(0,h.A)((0,y.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),g=(0,h.A)((0,y.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),x=(0,h.A)((0,y.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined");var S=r(9350);const w=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],j=(0,c.Ay)(m.A,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`${r.variant}${(0,d.A)(r.color||r.severity)}`]]}})(({theme:e})=>{const t="light"===e.palette.mode?s.e$:s.a,r="light"===e.palette.mode?s.a:s.e$;return(0,o.A)({},e.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(([,e])=>e.main&&e.light).map(([n])=>({props:{colorSeverity:n,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${n}Color`]:t(e.palette[n].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${n}StandardBg`]:r(e.palette[n].light,.9),[`& .${f.A.icon}`]:e.vars?{color:e.vars.palette.Alert[`${n}IconColor`]}:{color:e.palette[n].main}}})),...Object.entries(e.palette).filter(([,e])=>e.main&&e.light).map(([r])=>({props:{colorSeverity:r,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${r}Color`]:t(e.palette[r].light,.6),border:`1px solid ${(e.vars||e).palette[r].light}`,[`& .${f.A.icon}`]:e.vars?{color:e.vars.palette.Alert[`${r}IconColor`]}:{color:e.palette[r].main}}})),...Object.entries(e.palette).filter(([,e])=>e.main&&e.dark).map(([t])=>({props:{colorSeverity:t,variant:"filled"},style:(0,o.A)({fontWeight:e.typography.fontWeightMedium},e.vars?{color:e.vars.palette.Alert[`${t}FilledColor`],backgroundColor:e.vars.palette.Alert[`${t}FilledBg`]}:{backgroundColor:"dark"===e.palette.mode?e.palette[t].dark:e.palette[t].main,color:e.palette.getContrastText(e.palette[t].main)})}))]})}),O=(0,c.Ay)("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),P=(0,c.Ay)("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),E=(0,c.Ay)("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),C={success:(0,y.jsx)(A,{fontSize:"inherit"}),warning:(0,y.jsx)(b,{fontSize:"inherit"}),error:(0,y.jsx)(g,{fontSize:"inherit"}),info:(0,y.jsx)(x,{fontSize:"inherit"})},M=a.forwardRef(function(e,t){const r=(0,u.b)({props:e,name:"MuiAlert"}),{action:a,children:s,className:c,closeText:m="Close",color:h,components:A={},componentsProps:b={},icon:g,iconMapping:x=C,onClose:M,role:k="alert",severity:_="success",slotProps:$={},slots:N={},variant:z="standard"}=r,W=(0,n.A)(r,w),T=(0,o.A)({},r,{color:h,severity:_,variant:z,colorSeverity:h||_}),F=(e=>{const{variant:t,color:r,severity:n,classes:o}=e,a={root:["root",`color${(0,d.A)(r||n)}`,`${t}${(0,d.A)(r||n)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return(0,l.A)(a,f.X,o)})(T),I={slots:(0,o.A)({closeButton:A.CloseButton,closeIcon:A.CloseIcon},N),slotProps:(0,o.A)({},b,$)},[L,R]=(0,p.A)("closeButton",{elementType:v.A,externalForwardedProps:I,ownerState:T}),[B,D]=(0,p.A)("closeIcon",{elementType:S.A,externalForwardedProps:I,ownerState:T});return(0,y.jsxs)(j,(0,o.A)({role:k,elevation:0,ownerState:T,className:(0,i.A)(F.root,c),ref:t},W,{children:[!1!==g?(0,y.jsx)(O,{ownerState:T,className:F.icon,children:g||x[_]||C[_]}):null,(0,y.jsx)(P,{ownerState:T,className:F.message,children:s}),null!=a?(0,y.jsx)(E,{ownerState:T,className:F.action,children:a}):null,null==a&&M?(0,y.jsx)(E,{ownerState:T,className:F.action,children:(0,y.jsx)(L,(0,o.A)({size:"small","aria-label":m,title:m,color:"inherit",onClick:M},R,{children:(0,y.jsx)(B,(0,o.A)({fontSize:"small"},D))}))}):null]}))})},6025:(e,t,r)=>{r.d(t,{A:()=>d});var n=r(8168),o=r(8587),a=r(1523),i=r(2879),l=r(6677),s=r(2505);const c=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],u=["component","slots","slotProps"],p=["component"];function d(e,t){const{className:r,elementType:d,ownerState:m,externalForwardedProps:f,getSlotOwnerState:v,internalForwardedProps:h}=t,y=(0,o.A)(t,c),{component:A,slots:b={[e]:void 0},slotProps:g={[e]:void 0}}=f,x=(0,o.A)(f,u),S=b[e]||d,w=(0,l.A)(g[e],m),j=(0,s.A)((0,n.A)({className:r},y,{externalForwardedProps:"root"===e?x:void 0,externalSlotProps:w})),{props:{component:O},internalRef:P}=j,E=(0,o.A)(j.props,p),C=(0,a.A)(P,null==w?void 0:w.ref,t.ref),M=v?v(E):{},k=(0,n.A)({},m,M),_="root"===e?O||A:O,$=(0,i.A)(S,(0,n.A)({},"root"===e&&!A&&!b[e]&&h,"root"!==e&&!b[e]&&h,E,_&&{as:_},{ref:C}),k);return Object.keys(M).forEach(e=>{delete $[e]}),[S,$]}},9350:(e,t,r)=>{r.d(t,{A:()=>a});r(6540);var n=r(561),o=r(4848);const a=(0,n.A)((0,o.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")}}]);