/*! For license information please see 102.19a8692761711f59cdc1.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[102],{1656:(e,t,n)=>{var r=n(4994);t.A=void 0;var a=r(n(2032)),o=n(4848);t.A=(0,a.default)((0,o.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess")},2048:(e,t,n)=>{var r=n(4994);t.A=void 0;var a=r(n(2032)),o=n(4848);t.A=(0,a.default)((0,o.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore")},2102:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ce});var r=n(6540),a=n(7834),o=n(3551),l=n(4992),c=n(2604),i=n(9367),u=n(1629),s=n(4339),m=n(7037),f=n(6831),p=n(799),d=n(1043),v=n(7071),h=n(1083),y=n(9591),b=n(5939),A=n(6761),g=n(3723),E=n(3049),w=n(691),O=n(6575),S=n(5359),j=n(3945),k=n(57),P=n(7681),x=n(9455),C=n(9375),_=n(8717),F=n(9307),T=n(6477),D=n(1775),z=n(9851),G=n(1656),B=n(2048),I=n(4976);function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach(function(t){U(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function U(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=N(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==N(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var i=r&&r.prototype instanceof c?r:c,u=Object.create(i.prototype);return L(u,"_invoke",function(n,r,a){var o,c,i,u=0,s=a||[],m=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,c=0,i=e,f.n=n,l}};function p(n,r){for(c=n,i=r,t=0;!m&&u&&!a&&t<s.length;t++){var a,o=s[t],p=f.p,d=o[2];n>3?(a=d===r)&&(i=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(c=0,f.v=r,f.n=o[1]):p<d&&(a=n<3||o[0]>r||r>d)&&(o[4]=n,o[5]=r,f.n=d,c=0))}if(a||n>1)return l;throw m=!0,r}return function(a,s,d){if(u>1)throw TypeError("Generator is already running");for(m&&1===s&&p(s,d),c=s,i=d;(t=c<2?e:i)||!m;){o||(c?c<3?(c>1&&(f.n=-1),p(c,i)):f.n=i:f.v=i);try{if(u=2,o){if(c||(a="next"),t=o[a]){if(!(t=t.call(o,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,c<2&&(c=0)}else 1===c&&(t=o.return)&&t.call(o),c<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),c=1);o=e}else if((t=(m=f.n<0)?i:n.call(r,f))!==l)break}catch(t){o=e,c=1,i=t}finally{u=1}}return{value:t,done:m}}}(n,a,o),!0),u}var l={};function c(){}function i(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(L(t={},r,function(){return this}),t),m=u.prototype=c.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,L(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return i.prototype=u,L(m,"constructor",u),L(u,"constructor",i),i.displayName="GeneratorFunction",L(u,a,"GeneratorFunction"),L(m),L(m,a,"Generator"),L(m,r,function(){return this}),L(m,"toString",function(){return"[object Generator]"}),($=function(){return{w:o,m:f}})()}function L(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}L=function(e,t,n,r){function o(t,n){L(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},L(e,t,n,r)}function R(e,t,n,r,a,o,l){try{var c=e[o](l),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,a)}function V(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function l(e){R(o,r,a,l,c,"next",e)}function c(e){R(o,r,a,l,c,"throw",e)}l(void 0)})}}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,c=[],i=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=o.call(n)).done)&&(c.push(r.value),c.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Y=function(){var e=(0,y.A)().token,t=q((0,r.useState)([]),2),n=t[0],c=t[1],i=q((0,r.useState)(null),2),d=i[0],N=i[1],W=q((0,r.useState)(!1),2),U=W[0],L=W[1],R=q((0,r.useState)(!1),2),Q=R[0],Y=R[1],H=q((0,r.useState)(null),2),J=H[0],K=H[1],X=q((0,r.useState)(""),2),Z=X[0],ee=X[1],te=q((0,r.useState)(!1),2),ne=te[0],re=te[1],ae=function(){var t=V($().m(function t(){var n,r,a;return $().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,h.A.get("http://localhost:5000/api/orders",{headers:{Authorization:"Bearer ".concat(e)}});case 1:n=t.v,r=n.data.filter(function(e){return ne?"Cancelled"===e.status:"Cancelled"!==e.status}),c(r),t.n=3;break;case 2:t.p=2,a=t.v,console.error("Error fetching orders:",a);case 3:return t.a(2)}},t,null,[[0,2]])}));return function(){return t.apply(this,arguments)}}();(0,r.useEffect)(function(){ae()},[e,ne]);var oe=function(){var t=V($().m(function t(n,r){var a;return $().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,h.A.put("http://localhost:5000/api/orders/".concat(n,"/status"),{status:r},{headers:{Authorization:"Bearer ".concat(e)}});case 1:ae(),t.n=3;break;case 2:t.p=2,a=t.v,console.error("Error updating order status:",a),alert("Failed to update order status.");case 3:return t.a(2)}},t,null,[[0,2]])}));return function(e,n){return t.apply(this,arguments)}}(),le=function(){var t=V($().m(function t(n){var r,a,o;return $().w(function(t){for(;;)switch(t.p=t.n){case 0:if(d!==n){t.n=1;break}N(null),t.n=6;break;case 1:return L(!0),t.p=2,t.n=3,h.A.get("http://localhost:5000/api/orders/".concat(n),{headers:{Authorization:"Bearer ".concat(e)}});case 3:r=t.v,c(function(e){return e.map(function(e){return e.id===n?M(M({},e),{},{items:r.data.items}):e})}),N(n),t.n=5;break;case 4:t.p=4,o=t.v,console.error("Error fetching order items:",(null===(a=o.response)||void 0===a?void 0:a.data)||o.message),alert("Failed to load order details.");case 5:return t.p=5,L(!1),t.f(5);case 6:return t.a(2)}},t,null,[[2,4,5,6]])}));return function(e){return t.apply(this,arguments)}}(),ce=function(){Y(!1),K(null),ee("")},ie=function(){var t=V($().m(function t(){var n,r,a;return $().w(function(t){for(;;)switch(t.p=t.n){case 0:if(Z){t.n=1;break}return alert("Please select a cancellation reason."),t.a(2);case 1:return t.p=1,t.n=2,h.A.put("http://localhost:5000/api/orders/".concat(J,"/cancel"),{reason:Z},{headers:{Authorization:"Bearer ".concat(e)}});case 2:alert("Order cancelled successfully!"),ce(),ae(),t.n=4;break;case 3:t.p=3,a=t.v,console.error("Error cancelling order:",(null===(n=a.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message)||a.message),alert("Failed to cancel order: "+((null===(r=a.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.message)||"Please try again."));case 4:return t.a(2)}},t,null,[[1,3]])}));return function(){return t.apply(this,arguments)}}();return r.createElement(a.A,{maxWidth:"lg",sx:{mt:4,mb:4}},r.createElement(o.A,{variant:"h4",component:"h1",gutterBottom:!0},"Order Management"),r.createElement(l.A,{sx:{mb:2}},r.createElement(u.A,{variant:"outlined",onClick:function(){return re(!ne)}},ne?"Show Active Orders":"Show Cancelled Orders")),r.createElement(b.A,{component:s.A},r.createElement(A.A,null,r.createElement(g.A,null,r.createElement(E.A,null,r.createElement(w.A,null,"Order ID"),r.createElement(w.A,null,"Customer"),r.createElement(w.A,null,"Date"),r.createElement(w.A,null,"Total"),r.createElement(w.A,null,"Status"),r.createElement(w.A,null,"Details"))),r.createElement(O.A,null,n.map(function(e){return r.createElement(r.Fragment,{key:e.id},r.createElement(E.A,null,r.createElement(w.A,null,e.id),r.createElement(w.A,null,e.user_first_name," ",e.user_last_name," (",e.user_email,")"),r.createElement(w.A,null,new Date(e.order_date).toLocaleDateString()),r.createElement(w.A,null,"$",parseFloat(e.total_amount).toFixed(2)),r.createElement(w.A,null,r.createElement(S.A,{variant:"standard",sx:{m:1,minWidth:120}},r.createElement(j.A,null,"Status"),r.createElement(k.A,{value:e.status,onChange:function(t){return oe(e.id,t.target.value)},label:"Status"},r.createElement(P.A,{value:"pending"},"Pending"),r.createElement(P.A,{value:"processing"},"Processing"),r.createElement(P.A,{value:"shipped"},"Shipped"),r.createElement(P.A,{value:"delivered"},"Delivered"),r.createElement(P.A,{value:"cancelled"},"Cancelled")))),r.createElement(w.A,null,r.createElement(u.A,{variant:"outlined",size:"small",component:I.N_,to:"/order/".concat(e.id)},"View Details"),"Cancelled"!==e.status&&"Delivered"!==e.status&&r.createElement(u.A,{variant:"outlined",color:"error",size:"small",sx:{ml:1},onClick:function(){return t=e.id,K(t),void Y(!0);var t}},"Cancel")),r.createElement(w.A,null,r.createElement(x.A,{onClick:function(){return le(e.id)}},d===e.id?r.createElement(G.A,null):r.createElement(B.A,null)))),r.createElement(E.A,null,r.createElement(w.A,{style:{paddingBottom:0,paddingTop:0},colSpan:6},r.createElement(C.A,{in:d===e.id,timeout:"auto",unmountOnExit:!0},r.createElement(l.A,{sx:{margin:1}},r.createElement(o.A,{variant:"h6",gutterBottom:!0,component:"div"},"Order Items"),U&&d===e.id?r.createElement(l.A,{sx:{display:"flex",justifyContent:"center",py:2}},r.createElement(_.A,{size:20})):r.createElement(A.A,{size:"small","aria-label":"purchases"},r.createElement(g.A,null,r.createElement(E.A,null,r.createElement(w.A,null,"Product"),r.createElement(w.A,null,"Quantity"),r.createElement(w.A,{align:"right"},"Price"),r.createElement(w.A,{align:"right"},"Total"))),r.createElement(O.A,null,e.cancellation_reason&&r.createElement(E.A,null,r.createElement(w.A,{colSpan:4},r.createElement(o.A,{variant:"body2",color:"error"},r.createElement("strong",null,"Cancellation Reason:")," ",e.cancellation_reason))),e.items&&e.items.length>0?e.items.map(function(e,t){return r.createElement(E.A,{key:t},r.createElement(w.A,{component:"th",scope:"row"},e.name,e.image_url&&r.createElement("img",{src:"http://localhost:5000".concat(e.image_url),alt:e.name,style:{width:30,height:30,objectFit:"cover",borderRadius:"4px",marginLeft:"10px"}})),r.createElement(w.A,null,e.quantity),r.createElement(w.A,{align:"right"},"$",parseFloat(e.price).toFixed(2)),r.createElement(w.A,{align:"right"},"$",(parseFloat(e.price)*e.quantity).toFixed(2)))}):r.createElement(E.A,null,r.createElement(w.A,{colSpan:4},"No items found for this order.")))))))))})))),r.createElement(m.A,{open:Q,onClose:ce},r.createElement(f.A,null,"Cancel Order"),r.createElement(p.A,null,r.createElement(o.A,null,"Are you sure you want to cancel this order?"),r.createElement(S.A,{component:"fieldset",margin:"normal"},r.createElement(F.A,{component:"legend"},"Reason for cancellation:"),r.createElement(T.A,{"aria-label":"cancel reason",name:"cancelReason",value:Z,onChange:function(e){return ee(e.target.value)}},["Out of stock","Change of mind (not accepted)","Sourcing delay","Found cheaper elsewhere","Delivery time too long","Other"].map(function(e){return r.createElement(D.A,{key:e,value:e,control:r.createElement(z.A,null),label:e})})))),r.createElement(v.A,null,r.createElement(u.A,{onClick:ce},"No"),r.createElement(u.A,{onClick:ie,color:"error",variant:"contained"},"Yes, Cancel"))))};var H=n(5053),J=n(8120);function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach(function(t){ee(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ee(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=K(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==K(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var i=r&&r.prototype instanceof c?r:c,u=Object.create(i.prototype);return ne(u,"_invoke",function(n,r,a){var o,c,i,u=0,s=a||[],m=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,c=0,i=e,f.n=n,l}};function p(n,r){for(c=n,i=r,t=0;!m&&u&&!a&&t<s.length;t++){var a,o=s[t],p=f.p,d=o[2];n>3?(a=d===r)&&(i=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(c=0,f.v=r,f.n=o[1]):p<d&&(a=n<3||o[0]>r||r>d)&&(o[4]=n,o[5]=r,f.n=d,c=0))}if(a||n>1)return l;throw m=!0,r}return function(a,s,d){if(u>1)throw TypeError("Generator is already running");for(m&&1===s&&p(s,d),c=s,i=d;(t=c<2?e:i)||!m;){o||(c?c<3?(c>1&&(f.n=-1),p(c,i)):f.n=i:f.v=i);try{if(u=2,o){if(c||(a="next"),t=o[a]){if(!(t=t.call(o,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,c<2&&(c=0)}else 1===c&&(t=o.return)&&t.call(o),c<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),c=1);o=e}else if((t=(m=f.n<0)?i:n.call(r,f))!==l)break}catch(t){o=e,c=1,i=t}finally{u=1}}return{value:t,done:m}}}(n,a,o),!0),u}var l={};function c(){}function i(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(ne(t={},r,function(){return this}),t),m=u.prototype=c.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,ne(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return i.prototype=u,ne(m,"constructor",u),ne(u,"constructor",i),i.displayName="GeneratorFunction",ne(u,a,"GeneratorFunction"),ne(m),ne(m,a,"Generator"),ne(m,r,function(){return this}),ne(m,"toString",function(){return"[object Generator]"}),(te=function(){return{w:o,m:f}})()}function ne(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}ne=function(e,t,n,r){function o(t,n){ne(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},ne(e,t,n,r)}function re(e,t,n,r,a,o,l){try{var c=e[o](l),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,a)}function ae(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function l(e){re(o,r,a,l,c,"next",e)}function c(e){re(o,r,a,l,c,"throw",e)}l(void 0)})}}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,c=[],i=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=o.call(n)).done)&&(c.push(r.value),c.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return le(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const ce=function(){var e=(0,y.A)().token,t=oe((0,r.useState)([]),2),n=t[0],b=t[1],A=oe((0,r.useState)(!1),2),g=A[0],E=A[1],w=oe((0,r.useState)({id:null,name:"",description:"",price:"",imageUrl:"",stock:"",discount:""}),2),O=w[0],S=w[1],j=oe((0,r.useState)(null),2),k=j[0],P=j[1],x=oe((0,r.useState)(0),2),C=x[0],_=x[1],F=function(){var t=ae(te().m(function t(){var n,r;return te().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,h.A.get("http://localhost:5000/api/products",{headers:{Authorization:"Bearer ".concat(e)}});case 1:n=t.v,b(n.data),t.n=3;break;case 2:t.p=2,r=t.v,console.error("Error fetching products:",r);case 3:return t.a(2)}},t,null,[[0,2]])}));return function(){return t.apply(this,arguments)}}();(0,r.useEffect)(function(){0===C&&F()},[e,C]);var T=function(){S(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:null,name:"",description:"",price:"",imageUrl:"",stock:""}),P(null),E(!0)},D=function(){E(!1)},z=function(e){var t=e.target,n=t.name,r=t.value;S(Z(Z({},O),{},ee({},n,r)))},G=function(){var t=ae(te().m(function t(){var n,r,a;return te().w(function(t){for(;;)switch(t.p=t.n){case 0:if((n=new FormData).append("name",O.name),n.append("description",O.description),n.append("price",O.price),n.append("stock",O.stock),n.append("discount",O.discount),k?n.append("productImage",k):O.imageUrl&&n.append("image_url",O.imageUrl),t.p=1,!O.id){t.n=3;break}return t.n=2,h.A.put("http://localhost:5000/api/products/".concat(O.id),n,{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"multipart/form-data"}});case 2:t.n=4;break;case 3:return t.n=4,h.A.post("http://localhost:5000/api/products",n,{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"multipart/form-data"}});case 4:F(),D(),t.n=6;break;case 5:t.p=5,a=t.v,console.error("Error saving product:",(null===(r=a.response)||void 0===r?void 0:r.data)||a.message),alert("Failed to save product.");case 6:return t.a(2)}},t,null,[[1,5]])}));return function(){return t.apply(this,arguments)}}(),B=function(){var t=ae(te().m(function t(n){var r;return te().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!window.confirm("Are you sure you want to delete this product?")){t.n=4;break}return t.p=1,t.n=2,h.A.delete("http://localhost:5000/api/products/".concat(n),{headers:{Authorization:"Bearer ".concat(e)}});case 2:F(),t.n=4;break;case 3:t.p=3,r=t.v,console.error("Error deleting product:",r),alert("Failed to delete product.");case 4:return t.a(2)}},t,null,[[1,3]])}));return function(e){return t.apply(this,arguments)}}();return r.createElement(a.A,{maxWidth:"lg",sx:{mt:4,mb:4}},r.createElement(o.A,{variant:"h4",component:"h1",gutterBottom:!0},"Admin Dashboard"),r.createElement(l.A,{sx:{borderBottom:1,borderColor:"divider",mb:3}},r.createElement(c.A,{value:C,onChange:function(e,t){_(t)},"aria-label":"admin dashboard tabs"},r.createElement(i.A,{label:"Product Management"}),r.createElement(i.A,{label:"Order Management"}),r.createElement(i.A,{label:"Client Management"}),r.createElement(i.A,{label:"Shipping Management"}))),0===C&&r.createElement(r.Fragment,null,r.createElement(l.A,{sx:{mb:3}},r.createElement(u.A,{variant:"contained",color:"primary",onClick:function(){return T()}},"Add New Product")),r.createElement(o.A,{variant:"h5",component:"h2",gutterBottom:!0},"Product Management"),r.createElement(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:2}},n.map(function(e){return r.createElement(s.A,{key:e.id,sx:{p:2,width:200,textAlign:"center"}},r.createElement("img",{src:e.image_url?"http://localhost:5000".concat(e.image_url):"https://via.placeholder.com/300x200?text=No+Image",alt:e.name,style:{width:"100%",height:150,objectFit:"cover"}}),r.createElement(o.A,{variant:"h6"},e.name),r.createElement(o.A,{variant:"body2"},"$",parseFloat(e.price).toFixed(2)),r.createElement(o.A,{variant:"body2"},"Stock: ",e.stock),r.createElement(u.A,{size:"small",onClick:function(){return T(e)}},"Edit"),r.createElement(u.A,{size:"small",color:"error",onClick:function(){return B(e.id)}},"Delete"))})),r.createElement(m.A,{open:g,onClose:D},r.createElement(f.A,null,O.id?"Edit Product":"Add New Product"),r.createElement(p.A,null,r.createElement(d.A,{autoFocus:!0,margin:"dense",name:"name",label:"Product Name",type:"text",fullWidth:!0,variant:"standard",value:O.name,onChange:z}),r.createElement(d.A,{margin:"dense",name:"description",label:"Description",type:"text",fullWidth:!0,multiline:!0,rows:3,variant:"standard",value:O.description,onChange:z}),r.createElement(d.A,{margin:"dense",name:"price",label:"Price",type:"number",fullWidth:!0,variant:"standard",value:O.price,onChange:z}),r.createElement(d.A,{margin:"dense",name:"stock",label:"Stock",type:"number",fullWidth:!0,variant:"standard",value:O.stock,onChange:z}),r.createElement(d.A,{margin:"dense",name:"discount",label:"Discount (%)",type:"number",fullWidth:!0,variant:"standard",value:O.discount,onChange:z}),r.createElement(l.A,{sx:{mt:2}},r.createElement("input",{accept:"image/*",style:{display:"none"},id:"raised-button-file",multiple:!0,type:"file",onChange:function(e){P(e.target.files[0])}}),r.createElement("label",{htmlFor:"raised-button-file"},r.createElement(u.A,{variant:"contained",component:"span"},k?k.name:"Upload Image")),O.imageUrl&&!k&&r.createElement(o.A,{variant:"caption",display:"block",sx:{mt:1}},"Current Image: ",r.createElement("a",{href:"http://localhost:5000".concat(O.imageUrl),target:"_blank",rel:"noopener noreferrer"},"View")))),r.createElement(v.A,null,r.createElement(u.A,{onClick:D},"Cancel"),r.createElement(u.A,{onClick:G},O.id?"Update":"Add")))),1===C&&r.createElement(Y,null),2===C&&r.createElement(H.default,null),3===C&&r.createElement(J.default,null))}},8120:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var r=n(6540),a=n(7834),o=n(8717),l=n(3551),c=n(4659),i=n(5939),u=n(4339),s=n(6761),m=n(3723),f=n(3049),p=n(691),d=n(6575),v=n(5359),h=n(3945),y=n(57),b=n(7681),A=n(1629),g=n(1083),E=n(9591);function w(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var i=r&&r.prototype instanceof c?r:c,u=Object.create(i.prototype);return O(u,"_invoke",function(n,r,a){var o,c,i,u=0,s=a||[],m=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,c=0,i=e,f.n=n,l}};function p(n,r){for(c=n,i=r,t=0;!m&&u&&!a&&t<s.length;t++){var a,o=s[t],p=f.p,d=o[2];n>3?(a=d===r)&&(i=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(c=0,f.v=r,f.n=o[1]):p<d&&(a=n<3||o[0]>r||r>d)&&(o[4]=n,o[5]=r,f.n=d,c=0))}if(a||n>1)return l;throw m=!0,r}return function(a,s,d){if(u>1)throw TypeError("Generator is already running");for(m&&1===s&&p(s,d),c=s,i=d;(t=c<2?e:i)||!m;){o||(c?c<3?(c>1&&(f.n=-1),p(c,i)):f.n=i:f.v=i);try{if(u=2,o){if(c||(a="next"),t=o[a]){if(!(t=t.call(o,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,c<2&&(c=0)}else 1===c&&(t=o.return)&&t.call(o),c<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),c=1);o=e}else if((t=(m=f.n<0)?i:n.call(r,f))!==l)break}catch(t){o=e,c=1,i=t}finally{u=1}}return{value:t,done:m}}}(n,a,o),!0),u}var l={};function c(){}function i(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(O(t={},r,function(){return this}),t),m=u.prototype=c.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,O(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return i.prototype=u,O(m,"constructor",u),O(u,"constructor",i),i.displayName="GeneratorFunction",O(u,a,"GeneratorFunction"),O(m),O(m,a,"Generator"),O(m,r,function(){return this}),O(m,"toString",function(){return"[object Generator]"}),(w=function(){return{w:o,m:f}})()}function O(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}O=function(e,t,n,r){function o(t,n){O(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},O(e,t,n,r)}function S(e,t,n,r,a,o,l){try{var c=e[o](l),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,a)}function j(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function l(e){S(o,r,a,l,c,"next",e)}function c(e){S(o,r,a,l,c,"throw",e)}l(void 0)})}}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,c=[],i=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=o.call(n)).done)&&(c.push(r.value),c.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const x=function(){var e=(0,E.A)().token,t=k((0,r.useState)([]),2),n=t[0],O=t[1],S=k((0,r.useState)(!0),2),P=S[0],x=S[1],C=k((0,r.useState)(null),2),_=C[0],F=C[1],T=function(){var t=j(w().m(function t(){var n,r;return w().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,x(!0),t.n=1,g.A.get("http://localhost:5000/api/orders",{headers:{Authorization:"Bearer ".concat(e)}});case 1:n=t.v,O(n.data.filter(function(e){return"Cancelled"!==e.status&&"Delivered"!==e.status})),t.n=3;break;case 2:t.p=2,r=t.v,console.error("Error fetching orders:",r),F("Failed to fetch order data.");case 3:return t.p=3,x(!1),t.f(3);case 4:return t.a(2)}},t,null,[[0,2,3,4]])}));return function(){return t.apply(this,arguments)}}();(0,r.useEffect)(function(){T()},[e]);var D=function(){var t=j(w().m(function t(n,r){var a,o;return w().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,g.A.put("http://localhost:5000/api/orders/".concat(n,"/status"),{status:r},{headers:{Authorization:"Bearer ".concat(e)}});case 1:T(),t.n=3;break;case 2:t.p=2,o=t.v,console.error("Error updating order status:",(null===(a=o.response)||void 0===a?void 0:a.data)||o.message),alert("Failed to update order status.");case 3:return t.a(2)}},t,null,[[0,2]])}));return function(e,n){return t.apply(this,arguments)}}();return P?r.createElement(a.A,{maxWidth:"lg",sx:{mt:4,mb:4}},r.createElement(o.A,null),r.createElement(l.A,null,"Loading shipping data...")):_&&!n.length?r.createElement(a.A,{maxWidth:"lg",sx:{mt:4,mb:4}},r.createElement(c.A,{severity:"error"},_)):r.createElement(a.A,{maxWidth:"lg",sx:{mt:4,mb:4}},r.createElement(l.A,{variant:"h4",component:"h1",gutterBottom:!0},"Shipping Management"),0===n.length?r.createElement(l.A,null,"No active orders for shipping management."):r.createElement(i.A,{component:u.A},r.createElement(s.A,null,r.createElement(m.A,null,r.createElement(f.A,null,r.createElement(p.A,null,"Order ID"),r.createElement(p.A,null,"Customer"),r.createElement(p.A,null,"Shipping Address"),r.createElement(p.A,null,"Status"),r.createElement(p.A,null,"Actions"))),r.createElement(d.A,null,n.map(function(e){return r.createElement(f.A,{key:e.id},r.createElement(p.A,null,e.id),r.createElement(p.A,null,e.first_name," ",e.last_name," (",e.email,")"),r.createElement(p.A,null,e.shipping_address,", ",e.municipal,", ",e.district,", ",e.province),r.createElement(p.A,null,r.createElement(v.A,{variant:"standard",sx:{m:1,minWidth:120}},r.createElement(h.A,null,"Status"),r.createElement(y.A,{value:e.status,onChange:function(t){return D(e.id,t.target.value)},label:"Status"},r.createElement(b.A,{value:"pending"},"Pending"),r.createElement(b.A,{value:"processing"},"Processing"),r.createElement(b.A,{value:"shipped"},"Shipped"),r.createElement(b.A,{value:"delivered"},"Delivered")))),r.createElement(p.A,null,r.createElement(A.A,{variant:"outlined",size:"small",href:"/order/".concat(e.id)},"View Order")))})))))}}}]);