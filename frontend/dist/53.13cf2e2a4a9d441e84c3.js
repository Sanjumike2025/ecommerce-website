/*! For license information please see 53.13cf2e2a4a9d441e84c3.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[53],{5053:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D});var r=n(6540),a=n(7834),o=n(8717),i=n(3551),l=n(4659),u=n(4992),c=n(1629),s=n(5939),f=n(4339),m=n(6761),d=n(3723),p=n(3049),v=n(691),b=n(6575),h=n(7037),y=n(6831),A=n(799),g=n(1043),E=n(7071),w=n(1083),S=n(9591),O=n(1987);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach(function(t){P(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function P(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var u=r&&r.prototype instanceof l?r:l,c=Object.create(u.prototype);return _(c,"_invoke",function(n,r,a){var o,l,u,c=0,s=a||[],f=!1,m={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return o=t,l=0,u=e,m.n=n,i}};function d(n,r){for(l=n,u=r,t=0;!f&&c&&!a&&t<s.length;t++){var a,o=s[t],d=m.p,p=o[2];n>3?(a=p===r)&&(u=o[(l=o[4])?5:(l=3,3)],o[4]=o[5]=e):o[0]<=d&&((a=n<2&&d<o[1])?(l=0,m.v=r,m.n=o[1]):d<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,m.n=p,l=0))}if(a||n>1)return i;throw f=!0,r}return function(a,s,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,p),l=s,u=p;(t=l<2?e:u)||!f;){o||(l?l<3?(l>1&&(m.n=-1),d(l,u)):m.n=u:m.v=u);try{if(c=2,o){if(l||(a="next"),t=o[a]){if(!(t=t.call(o,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,l<2&&(l=0)}else 1===l&&(t=o.return)&&t.call(o),l<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),l=1);o=e}else if((t=(f=m.n<0)?u:n.call(r,m))!==i)break}catch(t){o=e,l=1,u=t}finally{c=1}}return{value:t,done:f}}}(n,a,o),!0),c}var i={};function l(){}function u(){}function c(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(_(t={},r,function(){return this}),t),f=c.prototype=l.prototype=Object.create(s);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,_(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=c,_(f,"constructor",c),_(c,"constructor",u),u.displayName="GeneratorFunction",_(c,a,"GeneratorFunction"),_(f),_(f,a,"Generator"),_(f,r,function(){return this}),_(f,"toString",function(){return"[object Generator]"}),(x=function(){return{w:o,m}})()}function _(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}_=function(e,t,n,r){function o(t,n){_(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},_(e,t,n,r)}function W(e,t,n,r,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,a)}function N(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){W(o,r,a,i,l,"next",e)}function l(e){W(o,r,a,i,l,"throw",e)}i(void 0)})}}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const D=function(){var e=(0,S.A)().token,t=T((0,r.useState)([]),2),n=t[0],j=t[1],k=T((0,r.useState)(!0),2),P=k[0],_=k[1],W=T((0,r.useState)(null),2),q=W[0],D=W[1],F=T((0,r.useState)(!1),2),z=F[0],G=F[1],B=T((0,r.useState)(null),2),M=B[0],I=B[1],L=T((0,r.useState)(""),2),U=L[0],$=L[1],H=T((0,r.useState)(""),2),J=H[0],K=H[1],Q=T((0,r.useState)(""),2),R=Q[0],V=Q[1],X=T((0,r.useState)(""),2),Y=X[0],Z=X[1],ee=T((0,r.useState)(""),2),te=ee[0],ne=ee[1],re=T((0,r.useState)(""),2),ae=re[0],oe=re[1],ie=T((0,r.useState)(""),2),le=ie[0],ue=ie[1],ce=T((0,r.useState)(""),2),se=ce[0],fe=ce[1],me=T((0,r.useState)(""),2),de=me[0],pe=me[1],ve=function(){var t=N(x().m(function t(){var n,r;return x().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,_(!0),t.n=1,w.A.get("http://localhost:5000/api/users",{headers:{Authorization:"Bearer ".concat(e)}});case 1:n=t.v,j(n.data.filter(function(e){return"client"===e.role})),t.n=3;break;case 2:t.p=2,r=t.v,console.error("Error fetching clients:",r),D("Failed to fetch client data.");case 3:return t.p=3,_(!1),t.f(3);case 4:return t.a(2)}},t,null,[[0,2,3,4]])}));return function(){return t.apply(this,arguments)}}();(0,r.useEffect)(function(){ve()},[e]);var be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;I(e),e?($(e.first_name||""),K(e.last_name||""),V(e.email||""),Z(e.mobile_number||""),ne(e.address||""),oe(e.province||""),ue(e.district||""),fe(e.municipal||""),pe("")):($(""),K(""),V(""),Z(""),ne(""),oe(""),ue(""),fe(""),pe("")),G(!0)},he=function(){G(!1),I(null),D(null)},ye=function(){var t=N(x().m(function t(){var n,r,a,o;return x().w(function(t){for(;;)switch(t.p=t.n){case 0:if(D(null),n={first_name:U,last_name:J,email:R,mobile_number:Y,address:te,province:ae,district:le,municipal:se},M||de){t.n=1;break}return D("Password is required for new clients."),t.a(2);case 1:if(de&&(n.password=de),t.p=2,!M){t.n=4;break}return t.n=3,w.A.put("http://localhost:5000/api/users/".concat(M.id),n,{headers:{Authorization:"Bearer ".concat(e)}});case 3:t.n=5;break;case 4:return t.n=5,w.A.post("http://localhost:5000/api/auth/register",C(C({},n),{},{password:de}),{headers:{Authorization:"Bearer ".concat(e)}});case 5:ve(),he(),t.n=7;break;case 6:t.p=6,o=t.v,console.error("Error saving client:",(null===(r=o.response)||void 0===r?void 0:r.data)||o.message),D((null===(a=o.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.message)||"Failed to save client.");case 7:return t.a(2)}},t,null,[[2,6]])}));return function(){return t.apply(this,arguments)}}(),Ae=function(){var t=N(x().m(function t(n){var r,a,o;return x().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!window.confirm("Are you sure you want to delete this client?")){t.n=4;break}return t.p=1,t.n=2,w.A.delete("http://localhost:5000/api/users/".concat(n),{headers:{Authorization:"Bearer ".concat(e)}});case 2:ve(),t.n=4;break;case 3:t.p=3,o=t.v,console.error("Error deleting client:",(null===(r=o.response)||void 0===r?void 0:r.data)||o.message),D((null===(a=o.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.message)||"Failed to delete client.");case 4:return t.a(2)}},t,null,[[1,3]])}));return function(e){return t.apply(this,arguments)}}();return P?r.createElement(a.A,{maxWidth:"lg",sx:{mt:4,mb:4}},r.createElement(o.A,null),r.createElement(i.A,null,"Loading clients...")):q&&!n.length?r.createElement(a.A,{maxWidth:"lg",sx:{mt:4,mb:4}},r.createElement(l.A,{severity:"error"},q)):r.createElement(a.A,{maxWidth:"lg",sx:{mt:4,mb:4}},r.createElement(i.A,{variant:"h4",component:"h1",gutterBottom:!0},"Client Management"),r.createElement(u.A,{sx:{mb:3}},r.createElement(c.A,{variant:"contained",onClick:function(){return be()}},"Add New Client")),0===n.length?r.createElement(i.A,null,"No clients found."):r.createElement(s.A,{component:f.A},r.createElement(m.A,null,r.createElement(d.A,null,r.createElement(p.A,null,r.createElement(v.A,null,"ID"),r.createElement(v.A,null,"Name"),r.createElement(v.A,null,"Email"),r.createElement(v.A,null,"Mobile"),r.createElement(v.A,null,"Address"),r.createElement(v.A,null,"Actions"))),r.createElement(b.A,null,n.map(function(e){return r.createElement(p.A,{key:e.id},r.createElement(v.A,null,e.id),r.createElement(v.A,null,e.first_name," ",e.last_name),r.createElement(v.A,null,e.email),r.createElement(v.A,null,e.mobile_number),r.createElement(v.A,null,e.address,", ",e.municipal,", ",e.district,", ",e.province),r.createElement(v.A,null,r.createElement(c.A,{size:"small",onClick:function(){return be(e)}},"Edit"),r.createElement(c.A,{size:"small",color:"error",onClick:function(){return Ae(e.id)}},"Delete")))})))),r.createElement(h.A,{open:z,onClose:he,fullWidth:!0,maxWidth:"sm"},r.createElement(y.A,null,M?"Edit Client":"Add New Client"),r.createElement(A.A,{dividers:!0},q&&r.createElement(l.A,{severity:"error",sx:{mb:2}},q),r.createElement(g.A,{margin:"dense",label:"First Name",type:"text",fullWidth:!0,value:U,onChange:function(e){return $(e.target.value)},required:!0}),r.createElement(g.A,{margin:"dense",label:"Last Name",type:"text",fullWidth:!0,value:J,onChange:function(e){return K(e.target.value)},required:!0}),r.createElement(g.A,{margin:"dense",label:"Email Address",type:"email",fullWidth:!0,value:R,onChange:function(e){return V(e.target.value)},required:!0,disabled:!!M}),r.createElement(g.A,{margin:"dense",label:"Mobile Number",type:"tel",fullWidth:!0,value:Y,onChange:function(e){return Z(e.target.value)},required:!0}),r.createElement(g.A,{margin:"dense",label:"Street Address / Tole",type:"text",fullWidth:!0,multiline:!0,rows:2,value:te,onChange:function(e){return ne(e.target.value)},required:!0}),r.createElement(O.A,{onAddressChange:function(e){var t=e.province,n=e.district,r=e.municipal;oe(t),ue(n),fe(r)},initialProvince:ae,initialDistrict:le,initialMunicipal:se}),!M&&r.createElement(g.A,{margin:"dense",label:"Password",type:"password",fullWidth:!0,value:de,onChange:function(e){return pe(e.target.value)},required:!0})),r.createElement(E.A,null,r.createElement(c.A,{onClick:he},"Cancel"),r.createElement(c.A,{onClick:ye,variant:"contained"},M?"Update":"Add"," Client"))))}}}]);